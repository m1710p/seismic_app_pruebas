import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';

class Evacuacion extends StatefulWidget {
  final LatLng fromPoint = LatLng(-33.016458927972565, -71.55328516751443);
  final LatLng toPoint = LatLng(-33.015610327842495, -71.5350427572602);
  @override
  _EvacuacionState createState() => _EvacuacionState();
}

class _EvacuacionState extends State<Evacuacion> {
  var dontsafezona = [
    [-32.99116247949983, -71.54877627322703],
    [-33.00026526821508, -71.55028367662528],
    [-33.008608666250346, -71.55299700274216],
    [-33.01505529716961, -71.55812217375238],
    [-33.01505529716961, -71.55827291409221],
    [-33.01897360709743, -71.5629458646268],
    [-33.025419480014584, -71.57364842875442],
    [-33.02744161752318, -71.57726619691023],
    [-33.02547614590526, -71.58392342805328],
    [-33.030024216804634, -71.58793295929657],
    [-33.03147432956341, -71.586949749082],
    [-33.0286271030775, -71.57506344910945],
    [-33.02548774673947, -71.56879375242063],
    [-33.02585279392065, -71.56448333619821],
    [-33.03220437282034, -71.56470103399991],
    [-33.04103741694258, -71.5543386187023],
    [-33.03209486681245, -71.55494817254706],
    [-33.031401325001355, -71.55725576924502],
    [-33.0274589835634, -71.55590604302083],
    [-33.02753199148748, -71.55594958258116],
    [-33.02738597557886, -71.5518568639093],
    [-33.03059826968695, -71.54846077820287],
    [-33.03483247847411, -71.54959280677167],
    [-33.03965046855834, -71.54994112325438],
    [-33.04225876051646, -71.54952093483641],
    [-33.03827203562547, -71.54676915333843],
    [-33.03614069359538, -71.54697852801762],
    [-33.0353884429216, -71.5461709399693],
    [-33.03599024397443, -71.54527361991562],
    [-33.040704210006666, -71.54554281593171],
    [-33.04325000485811, -71.5402362661528],
    [-33.03958961129925, -71.53662753042678],
    [-33.04518601928699, -71.53186399926841],
    [-33.03934759644717, -71.52771395318348],
    [-33.03704842219275, -71.52666741982293],
    [-33.04070892136915, -71.52327520863219],
    [-33.04993512458294, -71.50880417868912],
    [-33.04839244971924, -71.50602545218007],
    [-33.02771136917786, -71.52913994290218],
    [-33.01822257730963, -71.53969231251743],
    [-33.01514491201832, -71.54259803755994],
    [-33.00539826305974, -71.53487492621095],
    [-33.001422346806045, -71.5444332322694],
    [-32.99141763648258, -71.5472624908634],
  ];
  var safezonas = [
    [-33.009166923158446, -71.53554289650576],
    [-32.99599129943124, -71.54254821773232],
    [-32.98983886453856, -71.54475200798443],
    [-33.02203180076847, -71.51743496129272],
    [-33.01990308579516, -71.56429170615716],
    [-33.032377408884976, -71.56473445014508],
    [-33.02815260157279, -71.55242405147742],
    [-33.03756952838828, -71.54670457326169],
    [-33.038385120449725, -71.52777722773263],
  ];
  var makersOn = false;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
        body: Stack(children: [
      GoogleMap(
        initialCameraPosition: CameraPosition(
          target: widget.fromPoint,
          zoom: 16,
        ),
        mapType: MapType.hybrid,
        polygons: _createPolygon(),
        markers: _createMarkers(),
        myLocationEnabled: true,
        myLocationButtonEnabled: true,
      ),
    ]));
  }

  Set<Marker> _createMarkers() {
    var tmp = Set<Marker>();
    for (var i in safezonas) {
      tmp.add(Marker(
          markerId: MarkerId('Zona Segura'), position: LatLng(i[0], i[1])));
    }
    return tmp;
  }

  Set<Polygon> _createPolygon() {
    var pl = Set<Polygon>();
    var lista = <LatLng>[];
    for (var i in dontsafezona) {
      lista.add(LatLng(i[0], i[1]));
    }
    pl.add(
      Polygon(
        polygonId: PolygonId('Zona de Emergencia'),
        points: lista,
        strokeWidth: 2,
        strokeColor: Colors.yellow[400],
        fillColor: Colors.red.shade800.withOpacity(0.15),
      ),
    );
    return pl;
  }
}
